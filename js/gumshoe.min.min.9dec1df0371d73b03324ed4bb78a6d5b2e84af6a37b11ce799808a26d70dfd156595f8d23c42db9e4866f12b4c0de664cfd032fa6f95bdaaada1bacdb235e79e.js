/*! gumshoejs v5.1.1 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):e.Gumshoe=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(e){"use strict";var c={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},n=function(e,t,n){if(n.settings.events){var s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t.dispatchEvent(s)}},s=function(e){var t=0;if(e.offsetParent)for(;e;)t+=e.offsetTop,e=e.offsetParent;return t>=0?t:0},o=function(e){e&&e.sort(function(e,t){return s(e.content)<s(t.content)?-1:1})},i=function(t,n,s){var o=t.getBoundingClientRect(),i=function(e){return parseFloat("function"==typeof e.offset?e.offset():e.offset)}(n);return s?parseInt(o.bottom,10)<(e.innerHeight||document.documentElement.clientHeight):parseInt(o.top,10)<=i},l=function(){return e.innerHeight+e.pageYOffset>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},d=function(e,t){var n,s=e[e.length-1];if(function(e,t){return!!l()&&!!i(e.content,t,!0)}(s,t))return s;for(n=e.length-1;n>=0;n--)if(i(e[n].content,t))return e[n]},a=function(e,t){if(t.nested){var n=e.parentNode.closest("li");n&&(n.classList.remove(t.nestedClass),a(n,t))}},t=function(e,t){if(e){var s=e.nav.closest("li");s&&(s.classList.remove(t.navClass),e.content.classList.remove(t.contentClass),a(s,t),n("gumshoeDeactivate",s,{link:e.nav,content:e.content,settings:t}))}},r=function(e,t){if(t.nested){var n=e.parentNode.closest("li");n&&(n.classList.add(t.nestedClass),r(n,t))}};return function(s,i){u={},u.setup=function(){f=document.querySelectorAll(s),m=[],Array.prototype.forEach.call(f,function(e){var t=document.getElementById(decodeURIComponent(e.hash.substr(1)));t&&m.push({nav:e,content:t})}),o(m)},u.detect=function(){var e=d(m,l);e?a&&e.content===a.content||(t(a,l),function(e,t){if(e){var s=e.nav.closest("li");s&&(s.classList.add(t.navClass),e.content.classList.add(t.contentClass),r(s,t),n("gumshoeActivate",s,{link:e.nav,content:e.content,settings:t}))}}(e,l),a=e):a&&(t(a,l),a=null)};var a,l,u,h,m,f,p=function(){h&&e.cancelAnimationFrame(h),h=e.requestAnimationFrame(u.detect)},g=function(){h&&e.cancelAnimationFrame(h),h=e.requestAnimationFrame(function(){o(m),u.detect()})};return u.destroy=function(){a&&t(a,l),e.removeEventListener("scroll",p,!1),l.reflow&&e.removeEventListener("resize",g,!1),m=null,f=null,a=null,h=null,l=null},l=function(){var e={};return Array.prototype.forEach.call(arguments,function(t){for(var n in t){if(!t.hasOwnProperty(n))return;e[n]=t[n]}}),e}(c,i||{}),u.setup(),u.detect(),e.addEventListener("scroll",p,!1),l.reflow&&e.addEventListener("resize",g,!1),u}})